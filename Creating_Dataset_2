%% Initialise variables
clear cam
webcamlist
cam = webcam(1);
reference = snapshot(cam);

D = size(reference);

array = zeros(D(1),D(2),D(3),100);

noimages = array(4)

%% Create Training / Testing Dataset
set(gcf, 'Visible', 'on')
vw = VideoWriter('Dataset.avi');
vw.open();

figure;

for i = 1:noimages
    image = snapshot(cam);
    imgsize = imresize(image, [480, 640]);
    imshow(imgsize);
    vw.writeVideo(imgsize);
    title(i);
    pause(0.01);
end

vw.close();


%% 
vid = VideoReader('Dataset.avi');
vw = VideoWriter('Processed.avi');
vw.open();

for i = 1:noimages
frame = readFrame(vid);
% Apply image processing techniques.. e.g. rgb2gray etc.
name = sprintf('Image_%d.png',i);% Create a string corresponding to the image number
filename = fullfile('File Location',name);% Creates variable of file path location (including name of the image).
imwrite(imgbw4,filename); % Write image data to the file specified by filename (with the image name).
vw.writeVideo(imgbw4);
title(i);
pause(0.01);
end

vw.close();
